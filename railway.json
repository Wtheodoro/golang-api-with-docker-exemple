{
  "version": 2,
  "services": {
    "db": {
      "name": "mysql_db",
      "build": {
        "context": ".",
        "dockerfile": "db.Dockerfile"
      },
      "platform": "linux/x86_64",
      "networks": ["default"],
      "restart": "always",
      "ports": ["3306:3306"],
      "env": {
        "MYSQL_RANDOM_ROOT_PASSWORD": "topSecretPassword",
        "MYSQL_DATABASE": "test_database",
        "MYSQL_USER": "test_user",
        "MYSQL_PASSWORD": "topSecretPassword"
      },
      "volumes": ["mysql_data:/var/lib/mysql"],
      "command": ["--default-authentication-plugin=mysql_native_password"]
    },
    "api": {
      "name": "golang_api",
      "build": {
        "context": ".",
        "dockerfile": "api.Dockerfile"
      },
      "ports": ["8080:8080"],
      "depends_on": ["db"],
      "volumes": [".:/app/"]
    }
  },
  "networks": {
    "default": {}
  },
  "volumes": {
    "mysql_data": {}
  }
}
